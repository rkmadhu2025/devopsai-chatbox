# =============================================================================
# KUBERNETES SERVICE - DevOps Multi-Agent Chatbot (NodePort)
# =============================================================================
apiVersion: v1
kind: Service
metadata:
  name: devops-chatbot
  namespace: default
  labels:
    app: devops-chatbot
    component: chatbot
  annotations:
    description: "NodePort service for DevOps Chatbot access"
spec:
  type: NodePort
  selector:
    app: devops-chatbot
  ports:
  - name: http
    protocol: TCP
    port: 80              # Service port (internal cluster access)
    targetPort: 8000      # Container port
    nodePort: 30080       # External access port (30000-32767)
  sessionAffinity: ClientIP
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 3600

---
# =============================================================================
# OPTIONAL: ClusterIP Service for internal-only access
# =============================================================================
apiVersion: v1
kind: Service
metadata:
  name: devops-chatbot-internal
  namespace: default
  labels:
    app: devops-chatbot
    component: chatbot
spec:
  type: ClusterIP
  selector:
    app: devops-chatbot
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
